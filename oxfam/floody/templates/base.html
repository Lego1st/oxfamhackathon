{% load staticfiles %} 
{% load static %}
<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- <link rel="stylesheet" href="{% static 'font-awesome-4.7.0/css/font-awesome.min.css' %}" />
    <link rel="stylesheet" href="{% static 'font-awesome-4.7.0/css/font-awesome.css' %}" /> -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- <link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.css" rel="stylesheet" type='text/css'> -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Lobster|Playfair+Display|Playfair+Display+SC" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <script type="text/javascript"
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDPJKsp0KIXVQNZTO8DY1xT6G3fcCvG3Jg&libraries=visualization">
    </script>
    <title>
        {% block title %} Floody Alert {% endblock title %}
    </title>
    {% block header %}{% endblock header %}

</head>

<meta name="viewport" content="width=device-width, initial-scale=1"> 

<body>
    <div class="hero-image">
        <div class="hero-text">
            <h1 style="font-size: 30px">Floody Alert</h1>
            <h2 style="font-size: 15px;" >Travel more safely</h2>
        </div>
        </div>
    </div>
    <a href="#" type="button" class="btn btn-info btn-lg float-upload">
        <i class="fa fa-upload fa-2x" style="margin-left: -3px;">
            <input type="file" style="display: none;" class="file" id="file" required>
        </i>
    </a>
        
    {% if user.is_authenticated %}
     <a href="{% url 'floody:logged out' %}" type="button" class="btn btn-info btn-lg float-log-out">
         <i class="fa fa-sign-out fa-2x" aria-hidden="true"></i>
    </a>
    {% else %}
        <button type="button" class="btn btn-info btn-lg float-acc" data-toggle="modal" data-target="#myModal">
        <i class="fa fa-user fa-2x" aria-hidden="true"></i>
        </button>
    {% endif %}
    <div class="container" id="container">
        <div class="modal fade" id="myModal" role="dialog">
            <div class="modal-dialog">
        
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Accounts</h4>
                    </div>
                    <div class="modal-body">
                            <div class="row">
                                <div class="col-xs-3" style="text-align:center;"></div>
                                <div class="col-xs-2" style="text-align:center;">
                                    <a class="btn btn-primary loggin-btn">Log in </a> 
                                </div>
                                <div class="col-xs-2" style="text-align:center;">
                                    <h3 style="margin-top: -0px;">or</h3>
                                </div>
                                <div class="col-xs-2" style="text-align:center;">
                                    <a class="btn btn-success sign-up-btn">Sign up</a>
                                </div>
                                <div class="col-xs-3" style="text-align:center;"></div>
                            </div>
                            <div class="row sign-up">
                                <div class="col-xs-3"></div>
                                <div class="col-xs-6">
                                    <div class="main-sign-up">
                                        <div class="panel-heading">
                                            <div class="panel-title text-center">
                                                <h1 class="title">Registration</h1>
                                                <hr />
                                            </div>
                                        </div>
                                        <div class="main-login main-center content">
                                            <form class="form-horizontal" role="form" method="POST" action="{% url 'floody:register complete' %}">
                                                {% csrf_token %}
                                                <div class="form-group">
                                                    <label for="name" class="cols-sm-2 control-label">Username</label>
                                                    <div class="cols-sm-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <i class="fa fa-user fa" aria-hidden="true"></i>
                                                            </span>
                                                            <input type="text" class="form-control" name="username" id="name" placeholder="Enter your username" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="email" class="cols-sm-2 control-label">Phone</label>
                                                    <div class="cols-sm-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <i class="fa fa-envelope fa" aria-hidden="true"></i>
                                                            </span>
                                                            <input type="text" class="form-control" name="first_name" id="email" placeholder="Enter your phone number" />
                                                        </div>
                                                    </div>
                                                </div>
                                
                                                <div class="form-group">
                                                    <label for="password" class="cols-sm-2 control-label">Password</label>
                                                    <div class="cols-sm-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <i class="fa fa-lock fa-lg" aria-hidden="true"></i>
                                                            </span>
                                                            <input type="password" class="form-control" name="password" id="password" placeholder="Enter your Password" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    {% if error != None %} {% for e in error %}
                                                    <p style="color:red;">{{e}}</p>
                                                    {% endfor %} {% endif %}
                                                </div>
                                                <div class="form-group ">
                                                    <button type="submit" class="btn btn-primary btn-lg btn-block login-button">Register</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row loggin">
                                <div class="col-xs-3"></div>
                                <div class="col-xs-6">
                                    <div class="main-loggin">
                                        <div class="panel-heading">
                                            <div class="panel-title text-center">
                                                <h1 class="title">Login</h1>
                                                <hr />
                                            </div>
                                        </div>
                                        <div class="main-login main-center content">
                                            <form class="form-horizontal" role="form" method="POST" action="{% url 'floody:logged in' %}">
                                                {% csrf_token %}
                                                <div class="form-group">
                                                    <label for="name" class="cols-sm-2 control-label">Username</label>
                                                    <div class="cols-sm-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <i class="fa fa-user fa" aria-hidden="true"></i>
                                                            </span>
                                                            <input type="text" class="form-control" name="username" id="name" placeholder="Enter your username" />
                                                        </div>
                                                    </div>
                                                </div>
                                
                                                <div class="form-group">
                                                    <label for="password" class="cols-sm-2 control-label">Password</label>
                                                    <div class="cols-sm-10">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <i class="fa fa-lock fa-lg" aria-hidden="true"></i>
                                                            </span>
                                                            <input type="password" class="form-control" name="password" id="password" placeholder="Enter your Password" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    {% if error != None %} {% for e in error %}
                                                    <p style="color:red;">{{e}}</p>
                                                    {% endfor %} {% endif %}
                                                </div>
                                                <div class="form-group">
                                                    {% if messages %}
                                                    <ul class="messages">
                                                        {% for message in messages %}
                                                        <li{% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</li>
                                                            {% endfor %}
                                                    </ul>
                                                    {% endif %}
                                                </div>
                                                <div class="form-group ">
                                                    <button type="submit" class="btn btn-primary btn-lg btn-block login-button">Login</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
        
            </div>
        </div>

    </div>
    {% block content %} {% endblock content %}
    <footer>
        <div class="footer" id="footer">
            <div class="container" >
                <div class="row" >
                    <!-- <div class="col-lg-2  col-md-2 col-sm-4 col-xs-6"></div> -->
                    <div class="col-lg-2  col-md-2 col-sm-4 col-xs-6 col-md-offset-4">
                        <h3> Contact us </h3>
                        <ul>
                            <li>
                                <a href="https://www.facebook.com/tiensinh.vu"> Vu Tien Sinh </a>
                            </li>
                            <li>
                                <a href="https://www.facebook.com/tafilong"> Nguyen Tai Long </a>
                            </li>
                            <li>
                                <a href="https://www.facebook.com/lego1st"> Nguyen Trung Nghia </a>
                            </li>
                        </ul>
                    </div>

                    <div class="col-lg-2  col-md-2 col-sm-4 col-xs-6">
                        <h3> More Contact </h3>
                        <ul class="social" >
                            <li>
                                <a href="http://fb.com" target="_blank">
                                    <i class=" fa fa-facebook"> </i>
                                </a>
                            </li>
                            <li>
                                <a href="http://twitter.com" target="_blank">
                                    <i class="fa fa-twitter"> </i>
                                </a>
                            </li>
                            <li>
                                <a href="http://youtube.com" target="_blank">
                                    <i class="fa fa-youtube"> </i>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <!--/.row-->
            </div>
            <!--/.container-->
        </div>
        <!--/.footer-->

        <div class="footer-bottom">
            <div class="container" style="margin: auto; max-width: 360 px;">
                <p style="text-align: center;"> Copyright © SNL 2017. All right reserved. </p>
            </div>
        </div>
        <!--/.footer-bottom-->
    </footer>
</body>
<script>
    $(window).scroll(function () {
        if ($(window).scrollTop() >= 640) { $('.navbar').css('background', 'black'); }
        else { $('.navbar').css('background', 'transparent'); }
    });
    $(document).ready(function () {
        var el = document.getElementById('container');
        el.scrollIntoView(true);
    });
    $(document).ready(function () {
        var elMessages = $('.messages');
        if (elMessages.length && content) {
            $('.loggin').css('display', 'block');
            $('.sign-up').css('display', 'none');
            $('.float-acc').click();
        }
        else{
            $('.loggin').css('display', 'none');
            $('.sign-up').css('display', 'none');
        }
    })
    $('a.loggin-btn').click(function () {
        $('.loggin').css('display', 'block');
        $('.sign-up').css('display', 'none');
    })
    $('a.sign-up-btn').click(function () {
        $('.loggin').css('display', 'none');
        $('.sign-up').css('display', 'block');
    })

    $(document).on('change', '.file', function () {
        $("#image").val($(this).val().replace(/C:\\fakepath\\/i, ''));
    });


      var labels = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      var labelIndex = 0;
      var map, infoWindow;
      var pos;

      function initialize() {
        var bangalore = { lat: 12.97, lng: 77.59 };
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 12,
          center: bangalore
        });

        // This event listener calls addMarker() when the map is clicked.
        google.maps.event.addListener(map, 'click', function(event) {
          addMarker(event.latLng, map);
        });

        // Add a marker at the center of the map.
        
        infoWindow = new google.maps.InfoWindow;

        // Try HTML5 geolocation.
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };

            infoWindow.setPosition(pos);
            infoWindow.setContent('Your position');
            infoWindow.open(map);
            map.setCenter(pos);
            addMarker(pos, map);
          }, function() {
            handleLocationError(true, infoWindow, map.getCenter());
          });
        } else {
          // Browser doesn't support Geolocation
          handleLocationError(false, infoWindow, map.getCenter());
        }
      }

      // Adds a marker to the map.
      function addMarker(location, map) {
        // Add the marker at the clicked location, and add the next-available label
        // from the array of alphabetical characters.
        var marker = new google.maps.Marker({
          position: location,
          label: labels[labelIndex++ % labels.length],
          map: map
        });
      }

      function handleLocationError(browserHasGeolocation, infoWindow, pos) {
        infoWindow.setPosition(pos);
        infoWindow.setContent(browserHasGeolocation ?
                              'Error: The Geolocation service failed.' :
                              'Error: Your browser doesn\'t support geolocation.');
        infoWindow.open(map);
      }
      google.maps.event.addDomListener(window, 'load', initialize);
</script>

</html>